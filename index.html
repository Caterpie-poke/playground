<!DOCTYPE html>
<html>

<head>
  <title>Puppy: A Educational Simplification of Python with a Live Playground</title>
  <link rel="stylesheet" type="text/css" href="index.css">
  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?lang=css"></script>
  <script type="text/javascript" src="https://cdn.rawgit.com/pcooksey/bibtex-js/5ccf967/src/bibtex_js.js"></script>
  <bibtex src="./bib/test.bib"></bibtex>
</head>
<body>
  <div class="all-contents">
    <div id="essay">

      <div class="header">
        <h1>Puppy: A Educational Simplification of Python with a Live Playground</h1>
        <div class="authors">
          <div class='author'>
            <div class='name'>
              Taku Tada
            </div>
            <div class='institution'>
              Yokohama National University
            </div>
            <div class='e-mail'>
              <a href="tada-taku-jp@ynu.jp">tada-taku-jp@ynu.jp</a>
            </div>
          </div>
          <div class='author'>
            <div class='name'>
              Yuka Akinobu
            </div>
            <div class='institution'>
              Japan Women's University
            </div>
            <div class='e-mail'>
              <!-- <a href=""></a> -->
            </div>
          </div>
          <div class='author'>
            <div class='name'>
              Makoto Sakane
            </div>
            <div class='institution'>
              Japan Women's University
            </div>
            <div class='e-mail'>
              <!-- <a href=""></a> -->
            </div>
          </div>
          <div class='author'>
            <div class='name'>
              Kimio Kuramitsu
            </div>
            <div class='institution'>
              Japan Women's University
            </div>
            <div class='e-mail'>
              <a href="kuramitsuk@fc.jwu.ac.jp">kuramitsuk@fc.jwu.ac.jp</a>
            </div>
          </div>
        </div>
      </div>

      <div class="body">
        <h3>Abstract</h3>
        <h3>Introduction</h3>
        <p>
          A recent trend in introductory programming education in high schools is programming without coding.
          As seen in Scratch, students can build programs using GUI-based block components and learn a concept of programming without annoying syntax errors.
        </p>
        <p>
          But, how do they learn the fun of coding?
        </p>
        <p>
          We consider that coding is an essence of programming.
          Live programming can be a key technique to learn a fun of coding for novice students.
          Based on this idea, we have been developing a code-intensive programming environment, called Puppy.
        </p>
        <p>
          Puppy is a Kid’s version of Python, which is designed to restrict Python’s syntax and complex functions in order to obtain richer programming experience in a short amount of time.
          Besides, Puppy has an integrated environment of program execution on physics engine, where a rich motion of objects is simulated with a small amount of coding.
        <p>
          The idea behind live programming in Puppy is straightforward.
          If a program execution reflects an intermediate result of coding, coding experience will be greatly improved for students.
          Puppy introduces Live Focus, which highlights some changed program states resulting from code change.
          Due to Live Focus, the students can learn an intuitive understanding of coding and program executions.
        </p>
        <p>
          This paper reports the initial development status of Puppy with several demonstrations.
          The paper proceeds as follows.
        </p>
        <h3>What is Puppy Like?</h3>
        <div class='FIXME'>途中からwidthが200になっている</div>
        <p>
          <!-- Puppy はどのような言語か？ 実際に簡単なデモをみながら、見ていこう。 -->
          What is Puppy like?
          Let's see features of Puppy with some demos.
        </p>
        <p>
          The <i>Rectangle</i> and <i>Circle</i> are basic classes that Puppy supplies standard.
          Like Python, an instance of a class is created by the following code without a keyword of <i>new</i>.
        </p>
        <div class="caption">Creating instances of a rectangle and a circle</div>
        <pre class="prettyprint">Rectangle(500, 950, width=1000, height=100, isStatic=true)
Circle(500,100,width=150, restitution=1.0)</pre>
        <p>
          The live programming environment called Puppy Playground makes easy to try Puppy.
          Let's try this code on Puppy Playground.
        </p>
        <div class="caption">The demo of a bounding ball</div>
        <video src='./video/bounding.mov' controls width="60%" height="auto"></video>
        <p>
          On the left side of the playground is a canvas where the execution result of Puppy is visualized.
          When you write code in the editor, the execution result of the code is immediately displayed on the canvas.
          In the above demo, the rectangle object was stationary, whereas the circle object was bounding.
          Why was the circle object bounding?
          This is attributed to a physics engine in the canvas.
          The physics engine makes objects on the canvas behave in the law of classical physics.
        </p>
        <p>
          We expect an educational effect by introducing the physics engine.
          Robot programming is often found in educational programming themes.
          This is caused by the visualization in the real world help to understand program behaviors.
          Therefore, Puppy expresses program behaviors in a virtual world close to reality.
        </p>

        <p>
          Let's go back to coding in Puppy.
          Puppy has a print function as well as other languages.
          Here's the code appending a print function to the previous one.
        </p>

        <div class='caption'>Appending a print function</div>
        <pre class="prettyprint">Rectangle(500, 950, width=1000, height=100, isStatic=true)
Circle(500,100,width=150, restitution=1.0)
print('Hello World')</pre>
        <p>
          Puppy Playground displays "Hello World" such as the following demo.
        </p>
        <div class='caption'>The demo of appending a print function</div>
        <video src='./video/bounding2.mov' controls width="60%" height="auto"></video>
        <p>
          The string of "Hello World" moved right to left on the canvas.
          Even just displaying a string makes a fun experience.
        </p>

        <p>
          In the case of appending a code at the tail, the execution is updated on live without stopping by Live Focus.
          Similarly, if a rewriting code is little, the execution is updated on live.
          The following demonstration shows live updating on Puppy Playground.
        </p>

        <div class='caption'>The demo of live updating</div>
        <video src='./video/bounding3.mov' controls width="60%" height="auto"></video>
        <p>
          As you can see, the canvas was updated partially by some rewriting codes.
          We aim to remove redundant time waiting for the execution unrelated to change.
          It makes the coding experience more exciting.
        </p>
        <p>
          The following code is the last code in the above demo.
        </p>
        <div class='caption'>The last code in the above demo</div>
        <pre class="prettyprint">Rectangle(500, 950, width=1000, height=100, isStatic=true, fillStyle='green')
Circle(500,100,width=150, restitution=1.5, image='bird.png')</pre>
        <p>
          In this code, two new properties <i>fillStyle</i> and <i>image</i> appeared.
          Besides these, Puppy provides a lot of other properties.
          Live Focus makes possible to try and check the properties easily.
        </p>

        <p>
          Using an event property, we show a more complex example.
          A collisionEnd property is one of the event properties.
          A function registered this property is invoked by the event of the collision end.
          The following code is counting collision between a circle and another object.
        </p>

        <div class='caption'>The code of counting collision</div>
        <pre class="prettyprint">Rectangle(500, 950, width=1000, height=100, isStatic=true, fillStyle='green')
C = Circle(500,100, width=150, restitution=1.5, image='bird.png')
L = Label(100, 100, value=0)
def hit(obj1, obj2):
  L.value = L.value + 1
  print(L.value)
C.collisionEnd = hit</pre>
        <p>
          The <i>Lable</i> is a basic class for displaying a string.
          The value set in <i>value</i> property is cast to a string and displayed.
          Here is the demo of the code of counting collision.
        </p>
        <div class='caption'>The demo of counting collision</div>
        <video src='./video/bounding4.mov' controls width="60%" height="auto"></video>
        <p>
          As described above, Puppy has the Python like syntax, for instance, an assignment statement, function declaration, member access, and so on.
          Puppy is a simplification of Python; nevertheless, it is expressive enough to write a simple game.
          Finally, we introduce a breaking blocks game written in Puppy.
        </p>
        
        <div class='TODO'>ブロック崩しのデモ</div>

        <h3>Inside Puppy</h3>
        <p>
          In this section, we illustrate the implementation of Puppy Playground.
          The playground is implemented as a web application, thereby able to starting to write a Puppy code easily without building environment.
        </p>
        <p>
          The playground provides a source code editor that supports live coding.
          A Puppy code written on the editor is sent to a transcompile server, and so the server responds with a javascript code.
          A response javascript code consists of operations of Puppy Virtual Machine (Puppy VM).
          Puppy VM executes the operations and visualizes its result with the 2D physics engine javascript library called matter.js.
          Puppy VM provides API connecting to matter.js, thus it acts as a matter.js wrapper.
          The following figure schematically represents Puppy VM.
        </p>
        
        <div class="caption">Puppy VM</div>
        <img src='./image/PuppyVM.png' width="600" height="auto">
        <p>
          Matter.js draws 2D rigid bodies in a canvas tag of HTML.
          To draw the body, the registration of a javascript object to matter.js is required.
          Then, matter.js repeatedly draws and calculates for the registered object.
          Puppy VM provides the API of objects registration and changing parameters which registered objects have.
          These operating objects API is called by the javascript code which Puppy is translated.
          A new instance of Puppy basic class is registered in matter.js through the <i>newObject</i> API.
          When a user changes the parameter of the instance, the parameter of the instance registered in matter.js is also changed.
          On the other hand, Puppy VM also provides the API to call from a user interface.
          The <i>start</i> and <i>pause</i> API operate physics calculating.
          For example, when the button is pushed, the <i>start</i> API is called and order to run the physics engine.
        </p>
        <p>
          Puppy VM has a feature to support live programming.
          The <i>yield</i> feature realizes gradual execution.
          Puppy VM executes operations with a <i>for</i> statement, thereby gradual execution is possible by inserting a sleep per <i>yeild</i>.
          In an educational perspective, it helps to understand programming, due to confirming the correspondence between the executed code and the changes in the execution state.
        </p>

        <h4>Live Focus</h4>
        <p>
          Puppy Playground introduces Live Focus, which supports coding to improve the user experience.
          We will describe how to realize Live Focus.
          An editor on the playground keep in to be observed, moreover, code deferences are calculated.
          The code deferences are classified into the following three patterns.
        </p>

        <ol>
          <li><p>Appending at the tail of a code.</p></li>
          <li><p>Changing at the midway of a code.</p></li>
          <li><p>Otherwise.</p></li>
        </ol>

        <p>
          In the case of pattern 1, the appended code is continuously executed from the previous execution without stopping the program execution.
          In the case of pattern 2, if the changing point is the parameter, the parameter is updated without stopping the program execution.
          In the case of pattern 3, the program execution starts from the beginning.
        </p>

        <p>
          As a result, users can immediately watch the execution result reflected the change point of code.
          Therefore, Live Focus makes clear the relation between code differences and execution state differences.
        </p>

        <h3>Challenges and Conclusions</h3>
        <p>
          The challenge in live programming is the refinement of Live Focus.
          For fluid coding, the restart of a program should be removed as many as possible.
          We plan to support the more code changes not required stopping the program execution.
        </p>
        <p>
          Another challenge is the enhancement of coding supports.
          In particular, the supports linked with the visualized execution result is desirable such as idea of <a href="http://worrydream.com/LearnableProgramming/">Learnable Programming</a>.
          For instance, if a user mouse over the parameter of a rigid body, the playground explain by visual in the rigid body.
        </p>
        <p>
          In this essay, we introduced Puppy using some demos on a prototype implementation.
          Puppy is simple, whereas it is expressive enough to learn programming.
          In addition, Puppy Playground assists coding using live features.
          We described the implementation of Puppy Playground.
          If you want more detail, please access to <a href="https://github.com/KuramitsuLab/puppy"> the Puppy repository</a> on Github.
        </p>
        <h3>Reference</h3>
        <div class="bibtex_template">
          <ol>
            <li>
              <div class="if author" style="font-weight: bold;">
                <span class="if year">
                  <span class="year"></span>,
                </span>
                <span class="author"></span>
                <span class="if url" style="margin-left: 20px">
                  <a class="url" style="color:black; font-size:10px">(view online)</a>
                </span>
              </div>
              <div style="margin-left: 10px; margin-bottom:5px;">
                <span class="title"></span>
              </div>
            </li>
          </ol>
        </div>
        <div id="bibtex_display" bibtexkey="Scratch"></div>
      </div>

    </div>
  </div>
</body>

</html>